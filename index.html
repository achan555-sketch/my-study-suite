<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ€ Pink Trade Pro v2 ğŸ€</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&family=Roboto+Mono:wght@500&display=swap');
        :root { --p-light: #ffe5ec; --p-main: #ff8fab; --p-dark: #fb6f92; --bg: #fff0f3; --text: #5c4d50; --ask: #e84393; --bid: #00b894; }
        
        body { background: var(--bg); color: var(--text); font-family: 'Quicksand', sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; padding: 20px; box-sizing: border-box; }
        
        .dashboard { background: white; width: 100%; max-width: 450px; border-radius: 40px; padding: 25px; box-shadow: 0 20px 40px rgba(251, 111, 146, 0.15); border: 4px solid white; text-align: center; }
        .balance-val { font-size: 2rem; font-weight: 700; color: var(--p-dark); margin-bottom: 15px; }

        /* Chart */
        .chart-container { background: #fff9fa; border-radius: 20px; height: 120px; margin-bottom: 15px; position: relative; overflow: hidden; border: 1px solid var(--p-light); }
        canvas { width: 100%; height: 100%; }
        .price-tag { position: absolute; top: 10px; left: 15px; background: var(--p-dark); color: white; padding: 4px 12px; border-radius: 15px; font-size: 1rem; font-weight: bold; box-shadow: 0 4px 10px rgba(251, 111, 146, 0.3); }

        /* æ¿ï¼ˆOrder Bookï¼‰ */
        .board-container { background: #fff0f5; border-radius: 15px; padding: 10px; margin-bottom: 20px; font-family: 'Roboto Mono', monospace; font-size: 0.85rem; border: 2px solid var(--p-light); }
        .board-row { display: flex; justify-content: space-between; padding: 2px 5px; }
        .ask-row { color: var(--ask); }
        .bid-row { color: var(--bid); }
        .current-row { background: var(--p-light); font-weight: bold; color: var(--text); padding: 5px; border-radius: 8px; margin: 5px 0; }
        .qty { opacity: 0.7; }

        /* Controls */
        .trade-zone { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .btn { border: none; padding: 18px; border-radius: 20px; font-weight: 700; font-family: 'Quicksand'; font-size: 1.1rem; cursor: pointer; transition: 0.2s; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .btn:active { transform: scale(0.95); }
        .btn-buy { background: var(--p-dark); color: white; }
        .btn-sell { background: #eee; color: #666; }
        .btn-sell.active { background: var(--bid); color: white; }
        .btn:disabled { opacity: 0.3; cursor: not-allowed; }

        .portfolio-info { margin-top: 20px; font-size: 0.8rem; display: flex; justify-content: space-between; padding: 12px; background: var(--bg); border-radius: 15px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="dashboard">
        <div style="font-size:0.8rem; opacity:0.6;">TOTAL ASSETS</div>
        <div class="balance-val">Â¥<span id="total-val">100,000</span></div>

        <div class="chart-container">
            <canvas id="priceChart"></canvas>
            <div class="price-tag">Â¥<span id="current-price">100</span></div>
        </div>

        <div class="board-container" id="board-area">
            </div>

        <div class="trade-zone">
            <button class="btn btn-buy" id="buy-btn" onclick="buyAll()">BUY MAX ğŸ€</button>
            <button class="btn btn-sell" id="sell-btn" onclick="sellAll()" disabled>SELL ALL ğŸ’°</button>
        </div>

        <div class="portfolio-info">
            <span>Cash: Â¥<span id="cash">100,000</span></span>
            <span>Ribbons: <span id="holding">0</span>ğŸ€</span>
        </div>
    </div>

<script>
    let cash = 100000;
    let holding = 0;
    let price = 100;
    let priceHistory = Array(40).fill(100);
    
    const canvas = document.getElementById('priceChart');
    const ctx = canvas.getContext('2d');
    
    // ä¾¡æ ¼æ›´æ–°ï¼ˆå¿ƒè‡“éƒ¨ï¼‰
    function updatePrice() {
        const volatility = (Math.random() > 0.9) ? 0.15 : 0.04; // ãŸã¾ã«å¤§ããå‹•ã
        const change = price * volatility * (Math.random() - 0.48); 
        price = Math.max(10, Math.floor(price + change));
        
        priceHistory.push(price);
        if (priceHistory.length > 40) priceHistory.shift();
        
        drawChart();
        drawBoard(); // æ¿ã‚‚æ›´æ–°
        updateUI();
    }

    // ãƒãƒ£ãƒ¼ãƒˆæç”»ï¼ˆãƒªãƒƒãƒç‰ˆï¼‰
    function drawChart() {
        const w = canvas.width = canvas.offsetWidth;
        const h = canvas.height = canvas.offsetHeight;
        ctx.clearRect(0, 0, w, h);
        
        // ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ
        let gradient = ctx.createLinearGradient(0, 0, 0, h);
        gradient.addColorStop(0, 'rgba(251, 111, 146, 0.6)');
        gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');

        ctx.beginPath();
        const min = Math.min(...priceHistory) * 0.95;
        const max = Math.max(...priceHistory) * 1.05;
        
        // ç·šã‚’æã
        priceHistory.forEach((p, i) => {
            const x = (i / (priceHistory.length - 1)) * w;
            const y = h - ((p - min) / (max - min)) * h;
            if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
        });

        // ä¸‹ã‚’å¡—ã‚Šã¤ã¶ã™
        ctx.lineTo(w, h); ctx.lineTo(0, h); ctx.closePath();
        ctx.fillStyle = gradient; ctx.fill();
        
        // ä¸Šã®ç·šã‚’æ¿ƒãæã
        ctx.beginPath();
        priceHistory.forEach((p, i) => {
            const x = (i / (priceHistory.length - 1)) * w;
            const y = h - ((p - min) / (max - min)) * h;
            if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
        });
        ctx.strokeStyle = '#fb6f92'; ctx.lineWidth = 3; ctx.stroke();
    }

    // æ¿ï¼ˆæ°—é…å€¤ï¼‰æç”»ï¼ˆé©å½“ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
    function drawBoard() {
        const board = document.getElementById('board-area');
        let html = '';
        // å£²ã‚Šæ°—é… (Ask)
        for(let i=3; i>=1; i--) {
            html += `<div class="board-row ask-row"><span>Â¥${price + i*2 + Math.floor(Math.random()*3)}</span><span class="qty">${Math.floor(Math.random()*800+100)}</span></div>`;
        }
        // ç¾åœ¨å€¤
        html += `<div class="board-row current-row"><span>Current Price</span><span>Â¥${price}</span></div>`;
        // è²·ã„æ°—é… (Bid)
        for(let i=1; i<=3; i--) {
            html += `<div class="board-row bid-row"><span>Â¥${Math.max(1, price - i*2 - Math.floor(Math.random()*3))}</span><span class="qty">${Math.floor(Math.random()*800+100)}</span></div>`;
        }
        board.innerHTML = html;
    }

    function buyAll() {
        if (cash < price) return;
        const canBuy = Math.floor(cash / price);
        holding += canBuy;
        cash -= canBuy * price;
        updateUI();
    }

    function sellAll() {
        if (holding === 0) return;
        cash += holding * price;
        holding = 0;
        updateUI();
    }

    function updateUI() {
        const total = cash + (holding * price);
        document.getElementById('total-val').innerText = total.toLocaleString();
        document.getElementById('cash').innerText = Math.floor(cash).toLocaleString();
        document.getElementById('holding').innerText = holding;
        document.getElementById('current-price').innerText = price;
        
        document.getElementById('buy-btn').disabled = cash < price;
        const sellBtn = document.getElementById('sell-btn');
        sellBtn.disabled = holding === 0;
        if (holding > 0) sellBtn.classList.add('active'); else sellBtn.classList.remove('active');

        // è³‡ç”£ã®å¢—æ¸›ã§è‰²ã‚’å¤‰ãˆã‚‹
        const valEl = document.getElementById('total-val');
        valEl.style.color = total >= 100000 ? '#fb6f92' : '#5c4d50';
    }

    setInterval(updatePrice, 700); // æ›´æ–°ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’å°‘ã—æ—©ã
    window.onload = () => { updatePrice(); };
</script>
</body>
</html>
