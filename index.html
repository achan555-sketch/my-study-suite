<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ€ Pink Trade: VS Battle v6 ğŸ€</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&family=Roboto+Mono:wght@500&display=swap');
        :root { --p-light: #ffe5ec; --p-main: #ff8fab; --p-dark: #fb6f92; --bg: #fff0f3; --text: #5c4d50; --ask: #ff4757; --bid: #2ed573; }
        
        body { background: var(--bg); color: var(--text); font-family: 'Quicksand', sans-serif; margin: 0; padding: 10px; display: flex; justify-content: center; min-height: 100vh; box-sizing: border-box; }
        .wrapper { width: 100%; max-width: 500px; display: flex; flex-direction: column; gap: 10px; }
        
        /* Dashboard & Chart */
        .header-card { background: white; border-radius: 30px; padding: 15px; text-align: center; box-shadow: 0 10px 30px rgba(251,111,146,0.1); border: 3px solid white; }
        .chart-container { background: #111; border-radius: 20px; height: 100px; margin-top: 10px; position: relative; overflow: hidden; }
        canvas { width: 100%; height: 100%; }
        .price-tag { position: absolute; top: 10px; left: 10px; background: var(--p-dark); color: white; padding: 4px 10px; border-radius: 10px; font-weight: bold; }

        /* Board */
        .board { background: #111; border-radius: 15px; padding: 10px; font-family: 'Roboto Mono'; font-size: 0.75rem; color: #eee; }
        .board-row { display: flex; justify-content: space-between; }
        .mid-price { background: #222; text-align: center; padding: 4px; margin: 4px 0; border-radius: 5px; font-weight: bold; }

        /* Battle Zone */
        .battle-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .player-card { background: white; border-radius: 25px; padding: 15px; border: 3px solid var(--p-light); position: relative; }
        .player-card.winning { border-color: var(--p-dark); box-shadow: 0 0 15px rgba(251,111,146,0.4); }
        .winner-crown { position: absolute; top: -15px; left: 50%; transform: translateX(-50%); font-size: 1.5rem; display: none; }
        .player-card.winning .winner-crown { display: block; }

        .p-name { font-weight: 700; font-size: 0.9rem; margin-bottom: 5px; color: var(--p-dark); }
        .p-asset { font-size: 1.1rem; font-weight: 700; margin-bottom: 10px; }
        
        .trade-btns { display: grid; grid-template-columns: 1fr 1fr; gap: 5px; }
        .btn { border: none; padding: 10px; border-radius: 12px; font-weight: 700; cursor: pointer; font-family: 'Quicksand'; font-size: 0.8rem; color: white; transition: 0.1s; }
        .btn:active { transform: scale(0.92); }
        .btn-buy { background: var(--ask); }
        .btn-sell { background: var(--bid); }
        .btn-max { background: #eee; color: #888; grid-column: span 2; padding: 5px; font-size: 0.7rem; }
        .btn:disabled { opacity: 0.2; cursor: not-allowed; }

        .p-info { font-size: 0.7rem; margin-top: 10px; opacity: 0.7; font-weight: bold; }
    </style>
</head>
<body>

<div class="wrapper">
    <div class="header-card">
        <div style="font-size: 0.7rem; font-weight: 700; opacity: 0.5;">ğŸ€ PINK MARKET VS ğŸ€</div>
        <div class="chart-container">
            <canvas id="priceChart"></canvas>
            <div class="price-tag">Â¥<span id="cur-price">100</span></div>
        </div>
        <div class="board">
            <div id="ask-area"></div>
            <div class="mid-price">Â¥<span id="mid-price">100</span></div>
            <div id="bid-area"></div>
        </div>
    </div>

    <div class="battle-grid">
        <div class="player-card" id="card-p1">
            <div class="winner-crown">ğŸ‘‘</div>
            <div class="p-name">Player achan</div>
            <div class="p-asset">Â¥<span id="total-p1">100,000</span></div>
            <div class="trade-btns">
                <button class="btn btn-buy" onclick="trade(1, 'buy', 1)">Buy 1</button>
                <button class="btn btn-sell" id="s1-p1" onclick="trade(1, 'sell', 1)">Sell 1</button>
                <button class="btn btn-max" onclick="trade(1, 'buy', 'max')">Buy MAX</button>
                <button class="btn btn-max" id="sm-p1" onclick="trade(1, 'sell', 'max')">Sell ALL</button>
            </div>
            <div class="p-info">Cash: Â¥<span id="cash-p1">100k</span> / ğŸ€ <span id="hold-p1">0</span></div>
        </div>

        <div class="player-card" id="card-p2">
            <div class="winner-crown">ğŸ‘‘</div>
            <div class="p-name">Player Rival</div>
            <div class="p-asset">Â¥<span id="total-p2">100,000</span></div>
            <div class="trade-btns">
                <button class="btn btn-buy" onclick="trade(2, 'buy', 1)">Buy 1</button>
                <button class="btn btn-sell" id="s1-p2" onclick="trade(2, 'sell', 1)">Sell 1</button>
                <button class="btn btn-max" onclick="trade(2, 'buy', 'max')">Buy MAX</button>
                <button class="btn btn-max" id="sm-p2" onclick="trade(2, 'sell', 'max')">Sell ALL</button>
            </div>
            <div class="p-info">Cash: Â¥<span id="cash-p2">100k</span> / ğŸ€ <span id="hold-p2">0</span></div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script>
    let price = 100;
    let history = Array(40).fill(100);
    const MIN = 70, MAX = 130;

    let p1 = { cash: 100000, hold: 0 };
    let p2 = { cash: 100000, hold: 0 };

    const canvas = document.getElementById('priceChart');
    const ctx = canvas.getContext('2d');

    function updatePrice() {
        let move = (Math.random() - 0.5) * 14;
        if (Math.random() > 0.9) move *= 3;
        price = Math.max(MIN, Math.min(MAX, Math.floor(price + move)));
        
        history.push(price);
        if (history.length > 40) history.shift();
        
        drawChart();
        drawBoard();
        updateUI();
    }

    function drawChart() {
        const w = canvas.width = canvas.offsetWidth;
        const h = canvas.height = canvas.offsetHeight;
        ctx.clearRect(0, 0, w, h);
        ctx.beginPath();
        ctx.lineWidth = 3; ctx.strokeStyle = '#fb6f92';
        history.forEach((p, i) => {
            const x = (i / (history.length - 1)) * w;
            const y = h - ((p - 65) / (135 - 65)) * h;
            if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
        });
        ctx.stroke();
    }

    function drawBoard() {
        let askH = '', bidH = '';
        for(let i=3; i>=1; i--) askH += `<div class="board-row" style="color:var(--ask)"><span>Â¥${Math.min(MAX, price+i)}</span><span>${Math.floor(Math.random()*500)}</span></div>`;
        for(let i=1; i<=3; i++) bidH += `<div class="board-row" style="color:var(--bid)"><span>Â¥${Math.max(MIN, price-i)}</span><span>${Math.floor(Math.random()*500)}</span></div>`;
        document.getElementById('ask-area').innerHTML = askH;
        document.getElementById('bid-area').innerHTML = bidH;
        document.getElementById('mid-price').innerText = price;
        document.getElementById('cur-price').innerText = price;
    }

    function trade(pNum, type, amt) {
        let p = (pNum === 1) ? p1 : p2;
        if (type === 'buy') {
            let qty = (amt === 'max') ? Math.floor(p.cash / price) : amt;
            if (p.cash >= price * qty && qty > 0) { p.cash -= price * qty; p.hold += qty; }
        } else {
            let qty = (amt === 'max') ? p.hold : amt;
            if (p.hold >= qty && qty > 0) { p.cash += price * qty; p.hold -= qty; }
        }
        updateUI();
    }

    function updateUI() {
        const t1 = p1.cash + (p1.hold * price);
        const t2 = p2.cash + (p2.hold * price);
        
        document.getElementById('total-p1').innerText = t1.toLocaleString();
        document.getElementById('cash-p1').innerText = Math.floor(p1.cash/1000) + 'k';
        document.getElementById('hold-p1').innerText = p1.hold;
        
        document.getElementById('total-p2').innerText = t2.toLocaleString();
        document.getElementById('cash-p2').innerText = Math.floor(p2.cash/1000) + 'k';
        document.getElementById('hold-p2').innerText = p2.hold;

        // å‹åˆ©åˆ¤å®š
        document.getElementById('card-p1').className = `player-card ${t1 > t2 ? 'winning' : ''}`;
        document.getElementById('card-p2').className = `player-card ${t2 > t1 ? 'winning' : ''}`;

        // å£²ã‚Šãƒœã‚¿ãƒ³åˆ¶é™
        document.getElementById('s1-p1').disabled = p1.hold < 1;
        document.getElementById('sm-p1').disabled = p1.hold < 1;
        document.getElementById('s1-p2').disabled = p2.hold < 1;
        document.getElementById('sm-p2').disabled = p2.hold < 1;
    }

    setInterval(updatePrice, 600); // 0.6ç§’
    window.onload = () => { updatePrice(); };
</script>
</body>
</html>
